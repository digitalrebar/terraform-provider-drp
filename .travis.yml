language: go
addons:
  apt:
    packages:
    - sshpass
    - bsdtar
    - p7zip-full
sudo: false
go:
- 1.9
git:
  depth: 500
install:
- go get github.com/kardianos/govendor
- ./tools/build.sh
- ./tools/package.sh
- ./tools/publish.sh
script:
- make test
- make testacc
- make vendor-status
- make vet
after_success:
- bash <(curl -s https://codecov.io/bash) -t 6259c706-5c1d-471f-b62b-4f908ea1801d
notifications:
  slack:
    secure: Imuptg78FWWZlGVb8LBuwn45CeMfnHgf+pXbftR8mSGFRsg08jw38MIRtw/MAET3RJsciwDXf22AkgM8WgZ+fcUbJI4MGn2IvnM40T/imc5deqlMn1QdE5HasWrrBwfyY7hDu8XBexit+2fmYLGGrHX2fsbvUJepT4xOV8MZbZWMYueoBuL2bxNRR+lhjqVsKMq+/8q4g7hsKxYOdStEOZQIM13qI8dbIIQK4cCPQGtdNMGlNSX0a/nEFZmxDKh3WILssZcRst7SW3QldYppJO21PcTmY/zCTLJ5b7izweLczDmV77ckv61X50B8iaarhwEMFYs9Icg8U69mAkbqeU5HsWy1d2VDPDG+QW32VMTU371pVEzsmBVzArSXvldULmRzYcA+9LoYb5P6LNbq2y7tdimETOElbkMyw53hnb4ZPiypLWlwusZibCxGsJMp41MgbxxaMKxUgrBsAY9nSBg/oj7ixditveXm5IjqBJXfFyxuxfvcxssT15AiqFI3z+Mpoarq233V7E/c0AwdYc/iJKPtW8DG2uSjb0EMIKopXjEi/tz8ykVQH1UbKww5PvGfzCw2mCNF+Bc925coTs8gwaU+XOnqQesggUheAmpaQhbdPGpNYecbLgtQ3kafEBllTrgLyTqISkXlDMZybItP1C8GrEEshGWSEzBAEGU=
deploy:
- provider: releases
  overwrite: true
  api_key:
    secure: lLId1X8veaG+UDFswB8CPIbWckwSWTUNynpjJ3Zy1eMHVOuathWhQilb9iKwpuzmWXJwojLOd8SviOAPnGGwvNcVYGGEI8QYwCCbrkZpmvS9zDKn5u6P8Y5mVfeLCUt2NugVCWMuP2bahab41Mhv2q5NXyxGoSI4oeWVWgpyHaKWO2Mr6rIMdrqjYH1mOsIGZrf0SeM6ABthhD3nrAp6/4eT1lX3gKeu++zJUJ26zcLFi3090niGHoCbxQpTd+ogjLga5S4c7J61Fv0OVlVb8jTYb2kxpPOp/mKDcn/3hmMHS2SBFIjq6PBZvLBOiMrZg8DzaJITWPzl76kmkYwbQ+LPB+wAmNubXso8/GGga/Zf14BryU7Gl8GhIAd3A0McFiXvRN3lWYiOgjJInrcqnw/khaBoImvv2oDm+lJORtdSOrITQ59iLizoHJxjbX5UlaIKMysUAeXjGBlxW7R0fKg9oKZ7bSxoARsLFxIgvfmdyuoIoLG8FqWanG9+DqGFCOg/M7J1LVL50kViokJSwByq5/n+0NebjCKceTvIBIE6/BIV9bma04gBoMI/h64GyRAN/S+IortEs0GO7h/DskSetuUFmNQnm4w+Yw/do026/XExysA5KYVvGsjw2Y1mTZw90OD/xuBG+kwjAfaDJIvG34QoNOBHmy+SvJTifIY=
  file:
  - terraform-provider-drp.zip
  - terraform-provider-drp.sha256
  skip_cleanup: true
  on:
    repo: rackn/terraform-provider-drp
    tags: true
- provider: s3
  access_key_id: AKIAJF4QJY2A23DY6YTQ
  secret_access_key:
    secure: EsUuR96bUIwS1xNjO2jNnvOX8uvJUPmgZDHYRmIurIB2ch5jr1K7Bnk72CZ3VrDqmoIuGccd3+GF/QC/CDh1mwOskPBPo+M8nRZFNyhqKROfn6XRviHNSEUkO7TuLfGYT7P6J+vzDYkle7gaZ13SgrcM/f6j8JUSbNZnE+nOH38trAWkHJ5z7vEp54r4pqPkBYeS0GZHqKsaMhK7rVvG+k+LudwW/Fc6hP00OxdWpC8+K0HTsp1ew530DAOHSFUZBoK7rpj/u1z68hApr6Mdwut2OVqDazPRgBR6bnCjZ+9OYEQzK3tALtbIrrZ8xKgMAzInUiTYkgy2FbLic6peEgnNJmwpVjuS9lklZIfT8HvPs4q1ToA7GQUD/MCseR+iG0VSfrd4tKS5V9rBc4f5ZvnXoFoNIEpcwEEkYXhRj1WiCrTMdfjlyOpH0U0GCYY/Ll7LRzUyPvIXJcyxVhcXK9CfF9wyWrcFfLjYJEgtrbLx9oJVvpWrtRiSP7806RSq/1UNveujQlgjZ43l2PzvJaurxjCK5//ld02tUbohUrrAKSQRINRkuFxJl46lLsOM4jURXDjb/Vh78h/WS1uRMDyqUkoRhTLsYaVUmfbQXmGlCaFUOt78fkCC+HD1qEzqDRSHX2AmPu3QcwxFkkwomZq9jnf4KYl4WCI8bYK89lQ=
  bucket: rebar-catalog
  region: us-west-2
  local-dir: rebar-catalog
  acl: public_read
  skip_cleanup: true
  on:
    repo: rackn/terraform-provider-drp
    tags: true
